<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Review - GTL</title>
  <link rel="stylesheet" href="/components/content-components.css">
  <link rel="stylesheet" href="/assets/main-CxRme6jW.css">
  <style>
    body { margin: 0; padding: 0; }
    #app { min-height: 100vh; }
  </style>
</head>
<body>
  <main id="app">
    <div class="loading">Loading flashcards...</div>
  </main>
  <script src="/components/ReviewMode.js"></script>
  <script>
    const params = new URLSearchParams(window.location.search);
    const moduleId = params.get('module');

    if (!moduleId) {
      document.getElementById('app').innerHTML = '<p>No module specified. <a href="/">Go home</a></p>';
    } else {
      fetch('/api/modules/' + moduleId + '/flashcards')
        .then(r => r.json())
        .then(cards => {
          if (cards.length === 0) {
            document.getElementById('app').innerHTML = '<p>No flashcards in this module. <a href="/#/modules/' + moduleId + '">Go back</a></p>';
          } else {
            ReviewMode.start(moduleId, cards, 'app');
          }
        })
        .catch(err => {
          document.getElementById('app').innerHTML = '<p>Error loading flashcards. <a href="/">Go home</a></p>';
        });
    }
  </script>
</body>
</html>
